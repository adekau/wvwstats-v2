<div class="row" class="wvwstats-ct">
  <div class="col-xxxl-6 col-xxl-12">
    <!-- Card for match header and details -->
    <ngx-matchup-header-card></ngx-matchup-header-card>
    <div [class.loading]="loading" [nbSpinner]="loading">
      <div *ngIf="match$ | async as match">
        <ngx-matchup-card [match]="match"></ngx-matchup-card>
      </div>
    </div>

    <!-- Action bar (map/grapher/etc) -->
    <nb-card>
      <nb-card-body>
        <nb-actions size="medium" fullWidth>
          <nb-action nbTooltip="Map" icon="nb-location"></nb-action>
          <nb-action nbTooltip="Graphs" icon="nb-bar-chart" (click)="openGraphs()"></nb-action>
          <nb-action *ngIf="match$ | async as match">
            <ngx-timezone-picker nbTooltip="Timezone Data" [match]="match"></ngx-timezone-picker>
          </nb-action>
        </nb-actions>
      </nb-card-body>
    </nb-card>

    <!-- Time Range Selection -->
    <nb-card accent="info">
      <nb-card-header>
        Custom Time Period
      </nb-card-header>
      <nb-card-body>
        <div class="custom-range-form">
          <div class="combo">
            <span>Date Range:</span>
            <input nbInput placeholder="Select Date Range" [nbDatepicker]="range">
          </div>

          <div class="combo">
            <span>Start Time:</span>
            <ngb-timepicker [(ngModel)]="timeStart" [minuteStep]="minuteStep" [meridian]="true"></ngb-timepicker>
          </div>

          <div class="combo">
            <span>End Time:</span>
            <ngb-timepicker [(ngModel)]="timeEnd" [minuteStep]="minuteStep" [meridian]="true"></ngb-timepicker>
          </div>
          <button nbButton hero status="danger">Clear</button>
        </div>
        <nb-rangepicker #range></nb-rangepicker>
      </nb-card-body>
    </nb-card>

    <!-- Borderland Data -->
    <nb-card accent="info">
      <nb-card-header>
        Server K/Ds
      </nb-card-header>
      <nb-card-body [nbSpinner]="kdTableLoading">
        <ng2-smart-table [settings]="settings" [source]="source"></ng2-smart-table>
      </nb-card-body>
    </nb-card>

    <!-- Graphs -->
    <nb-card accent="info">
      <nb-card-header class="graph-header">
        K/D Evolution
        <button nbButton outline status="info" (click)="reloadKdGraph()">Reload</button>
      </nb-card-header>
      <nb-card-body>
        <div *ngIf="match$ | async as match">
          <ngx-wvw-chart [match]="match" [theme]="jstheme" data="kd" (init)="initKdGraph($event)"></ngx-wvw-chart>
        </div>
      </nb-card-body>
    </nb-card>

    <nb-card accent="info">
      <nb-card-header class="graph-header">
        PPT Evolution
        <button nbButton outline status="info" (click)="reloadPptGraph()">Reload</button>
      </nb-card-header>
      <nb-card-body>
        <div *ngIf="match$ | async as match">
          <ngx-wvw-chart [match]="match" [theme]="jstheme" data="ppt" (init)="initPptGraph($event)"></ngx-wvw-chart>
        </div>
      </nb-card-body>
    </nb-card>

  </div>
</div>